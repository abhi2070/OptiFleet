
<ng-container [formGroup]="compassGaugeWidgetConfigForm">
  <tb-timewindow-config-panel *ngIf="displayTimewindowConfig"
                              [onlyHistoryTimewindow]="onlyHistoryTimewindow()"
                              formControlName="timewindowConfig">
  </tb-timewindow-config-panel>
  <tb-datasources
    [configMode]="basicMode"
    hideDataKeyLabel
    hideDataKeyColor
    hideDataKeyUnits
    hideDataKeyDecimals
    formControlName="datasources">
  </tb-datasources>

  <div class="tb-form-panel">
    <div class="tb-form-panel-title" translate>widget-config.appearance</div>
    <div class="tb-form-row column-xs">
      <mat-slide-toggle class="mat-slide fixed-title-width"  formControlName="showTitle">
        {{ 'widget-config.title' | translate }}
      </mat-slide-toggle>
      <div fxFlex fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
        <mat-form-field fxFlex appearance="outline" subscriptSizing="dynamic">
          <input matInput formControlName="title" placeholder="{{ 'widget-config.set' | translate }}">
        </mat-form-field>
        <tb-font-settings formControlName="titleFont"
                          clearButton
                          [previewText]="compassGaugeWidgetConfigForm.get('title').value"
                          [initialPreviewStyle]="widgetConfig.config.titleStyle">
        </tb-font-settings>
        <tb-color-input asBoxInput
                        colorClearButton
                        formControlName="titleColor">
        </tb-color-input>
      </div>
    </div>
    <div class="tb-form-row space-between">
      <mat-slide-toggle class="mat-slide"  formControlName="showTitleIcon">
        {{ 'widget-config.icon' | translate }}
      </mat-slide-toggle>
      <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
        <tb-material-icon-select asBoxInput
                                 iconClearButton
                                 [color]="compassGaugeWidgetConfigForm.get('iconColor').value"
                                 formControlName="titleIcon">
        </tb-material-icon-select>
        <tb-color-input asBoxInput
                        colorClearButton
                        formControlName="iconColor">
        </tb-color-input>
      </div>
    </div>
  </div>

  <div class="tb-form-panel">
    <div class="tb-form-panel-title" translate>widgets.gauge.compass-appearance</div>
    <div class="tb-form-row">
      <div class="fixed-title-width" translate>widgets.gauge.labels</div>
      <div fxFlex fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
        <tb-string-items-list
          style="display: flex"
          fxFlex
          appearance="outline"
          subscriptSizing="dynamic"
          editable
          formControlName="majorTicks">
        </tb-string-items-list>
      </div>
    </div>
    <div class="tb-form-row space-between">
      <div translate>widgets.gauge.label-style</div>
      <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
        <tb-font-settings formControlName="majorTickFont"
                          disabledLineHeight>
        </tb-font-settings>
        <tb-color-input asBoxInput
                        colorClearButton
                        formControlName="majorTickColor">
        </tb-color-input>
      </div>
    </div>

    <div class="tb-form-row space-between">
      <div translate>widgets.gauge.major-ticks-color</div>
      <tb-color-input asBoxInput
                      colorClearButton
                      formControlName="colorMajorTicks">
      </tb-color-input>
    </div>
    <div class="tb-form-row space-between">
      <div translate>widgets.gauge.minor-ticks-color</div>
      <tb-color-input asBoxInput
                      colorClearButton
                      formControlName="colorMinorTicks">
      </tb-color-input>
    </div>
    <div class="tb-form-row space-between">
      <div translate>widgets.gauge.needle-color</div>
      <tb-color-input asBoxInput
                      colorClearButton
                      formControlName="colorNeedle">
      </tb-color-input>
    </div>
    <div class="tb-form-row space-between">
      <div translate>widgets.gauge.plate-color</div>
      <tb-color-input asBoxInput
                      colorClearButton
                      formControlName="colorPlate">
      </tb-color-input>
    </div>
  </div>

  <div class="tb-form-panel">
    <div class="tb-form-panel-title" translate>widget-config.card-appearance</div>
    <div class="tb-form-row space-between">
      <div>{{ 'widget-config.background-color' | translate }}</div>
      <tb-color-input asBoxInput
                      colorClearButton
                      formControlName="backgroundColor">
      </tb-color-input>
    </div>
    <div class="tb-form-row space-between column-lt-md">
      <div translate>widget-config.show-card-buttons</div>
      <mat-chip-listbox multiple formControlName="cardButtons">
        <mat-chip-option value="fullscreen">{{ 'fullscreen.fullscreen' | translate }}</mat-chip-option>
      </mat-chip-listbox>
    </div>
    <div class="tb-form-row space-between">
      <div>{{ 'widget-config.card-border-radius' | translate }}</div>
      <mat-form-field appearance="outline" subscriptSizing="dynamic">
        <input matInput formControlName="borderRadius" placeholder="{{ 'widget-config.set' | translate }}">
      </mat-form-field>
    </div>
  </div>
  <tb-widget-actions-panel
    formControlName="actions">
  </tb-widget-actions-panel>
</ng-container>
