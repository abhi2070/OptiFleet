<section class="tb-widget-settings" [formGroup]="threedMarkerSettingsFormGroup">
    <fieldset class="fields-group fields-group-slider">
        <legend class="group-title" translate>widgets.maps.marker-image</legend>
        <mat-expansion-panel class="tb-settings" [expanded]="threedMarkerSettingsFormGroup.get('showMarker').value">
            <mat-expansion-panel-header fxLayout="row wrap">
                <mat-panel-title>
                    <mat-slide-toggle formControlName="showMarker" (click)="$event.stopPropagation()"
                        fxLayoutAlign="center">Show marker on 3D model
                    </mat-slide-toggle>
                </mat-panel-title>
                <mat-panel-description fxLayoutAlign="end center" fxHide.xs translate>
                    widget-config.advanced-settings
                </mat-panel-description>
            </mat-expansion-panel-header>
            <ng-template matExpansionPanelContent>
                <mat-slide-toggle formControlName="useMarkerImageFunction" (click)="$event.stopPropagation()"
                    fxLayoutAlign="left">
                    {{ 'widgets.maps.use-marker-image-function' | translate }}
                </mat-slide-toggle>
                <tb-image-input [fxShow]="!threedMarkerSettingsFormGroup.get('useMarkerImageFunction').value"
                    label="{{ 'widgets.maps.custom-marker-image' | translate }}" formControlName="markerImage">
                </tb-image-input>
                <mat-form-field [fxShow]="!threedMarkerSettingsFormGroup.get('useMarkerImageFunction').value" fxFlex
                    class="mat-block">
                    <mat-label translate>widgets.maps.custom-marker-image-size</mat-label>
                    <input matInput type="number" min="1" formControlName="markerImageSize">
                </mat-form-field>
                <tb-js-func [fxShow]="threedMarkerSettingsFormGroup.get('useMarkerImageFunction').value"
                    formControlName="markerImageFunction" [globalVariables]="functionScopeVariables"
                    [functionArgs]="['data', 'images', 'dsData', 'dsIndex']"
                    functionTitle="{{ 'widgets.maps.marker-image-function' | translate }}"
                    helpId="widget/lib/map/marker_image_fn">
                </tb-js-func>
                <tb-multiple-image-input [fxShow]="threedMarkerSettingsFormGroup.get('useMarkerImageFunction').value"
                    label="{{ 'widgets.maps.marker-images' | translate }}" formControlName="markerImages">
                </tb-multiple-image-input>
            </ng-template>
        </mat-expansion-panel>
    </fieldset>
</section>
