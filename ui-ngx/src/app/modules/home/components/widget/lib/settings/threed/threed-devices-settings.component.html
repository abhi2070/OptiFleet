<section class="tb-widget-settings" [formGroup]="threedDevicesSettingsFormGroup">
    <fieldset class="fields-group">
        <legend class="group-title">Devices settings</legend>

        <div fxLayout="column" 
            [ngStyle]="!isLast ? {paddingBottom: '8px'} : {}"
            *ngFor="let deviceGroupControl of deviceGroupsFormArray().controls; trackBy: trackByDeviceGroupControl; let $index = index; last as isLast;">

            <tb-threed-device-group-settings 
                [sceneEditor]="sceneEditor" 
                [aliasController]="aliasController"
                [formControl]="deviceGroupControl" 
                (removeDeviceGroup)="removeDeviceGroup($index)"
                label="Devices group {{$index+1}}"
                [forceExpand]="deviceGroupControl.expandedId">
            </tb-threed-device-group-settings>

        </div>

        <div style="padding-top: 16px;">
            <button mat-raised-button color="primary" type="button" (click)="addDeviceGroup()">
                <span>Add Devices Group</span>
            </button>
        </div>
    </fieldset>
</section>