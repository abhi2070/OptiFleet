
<ng-container [formGroup]="barChartWidgetSettingsForm">
  <div class="tb-form-panel">
    <div class="tb-form-panel-title" translate>widgets.bar-chart.bar-chart-card-style</div>
    <div class="tb-form-row space-between">
      <mat-slide-toggle class="mat-slide fixed-title-width" formControlName="showBarLabel">
        {{ 'widgets.bar-chart.label-on-bar' | translate }}
      </mat-slide-toggle>
      <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
        <tb-font-settings formControlName="barLabelFont"
                          disabledLineHeight
                          forceSizeUnit="px"
                          previewText="Humidity">
        </tb-font-settings>
        <tb-color-input asBoxInput
                        colorClearButton
                        formControlName="barLabelColor">
        </tb-color-input>
      </div>
    </div>
    <div class="tb-form-row space-between">
      <mat-slide-toggle class="mat-slide fixed-title-width" formControlName="showBarValue">
        {{ 'widgets.bar-chart.value-on-bar' | translate }}
      </mat-slide-toggle>
      <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
        <tb-font-settings formControlName="barValueFont"
                          disabledLineHeight
                          forceSizeUnit="px"
                          previewText="45">
        </tb-font-settings>
        <tb-color-input asBoxInput
                        colorClearButton
                        formControlName="barValueColor">
        </tb-color-input>
      </div>
    </div>
    <div class="tb-form-panel tb-slide-toggle">
      <mat-expansion-panel class="tb-settings" [expanded]="barChartWidgetSettingsForm.get('showLegend').value" [disabled]="!barChartWidgetSettingsForm.get('showLegend').value">
        <mat-expansion-panel-header fxLayout="row wrap">
          <mat-panel-title>
            <mat-slide-toggle class="mat-slide" formControlName="showLegend" (click)="$event.stopPropagation()"
                              fxLayoutAlign="center">
              {{ 'widget-config.legend' | translate }}
            </mat-slide-toggle>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <ng-template matExpansionPanelContent>
          <div class="tb-form-row space-between">
            <div>{{ 'legend.position' | translate }}</div>
            <mat-form-field class="medium-width" appearance="outline" subscriptSizing="dynamic">
              <mat-select formControlName="legendPosition">
                <mat-option *ngFor="let pos of legendPositions" [value]="pos">
                  {{ legendPositionTranslationMap.get(pos) | translate }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="tb-form-row space-between">
            <div>{{ 'legend.label' | translate }}</div>
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
              <tb-font-settings formControlName="legendLabelFont"
                                previewText="20 - 30">
              </tb-font-settings>
              <tb-color-input asBoxInput
                              colorClearButton
                              formControlName="legendLabelColor">
              </tb-color-input>
            </div>
          </div>
        </ng-template>
      </mat-expansion-panel>
    </div>
    <div class="tb-form-panel tb-slide-toggle">
      <mat-expansion-panel class="tb-settings" [expanded]="barChartWidgetSettingsForm.get('showTooltip').value" [disabled]="!barChartWidgetSettingsForm.get('showTooltip').value">
        <mat-expansion-panel-header fxLayout="row wrap">
          <mat-panel-title>
            <mat-slide-toggle class="mat-slide" formControlName="showTooltip" (click)="$event.stopPropagation()"
                              fxLayoutAlign="center">
              {{ 'widget-config.tooltip' | translate }}
            </mat-slide-toggle>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <ng-template matExpansionPanelContent>
          <div class="tb-form-row space-between">
            <div>{{ 'tooltip.value' | translate }}</div>
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
              <tb-font-settings formControlName="tooltipValueFont"
                                [previewText]="tooltipValuePreviewFn">
              </tb-font-settings>
              <tb-color-input asBoxInput
                              colorClearButton
                              formControlName="tooltipValueColor">
              </tb-color-input>
            </div>
          </div>
          <div class="tb-form-row column-xs">
            <mat-slide-toggle class="mat-slide fixed-title-width" formControlName="tooltipShowDate">
              {{ 'tooltip.date' | translate }}
            </mat-slide-toggle>
            <div fxFlex.gt-xs fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
              <tb-date-format-select fxFlex excludeLastUpdateAgo formControlName="tooltipDateFormat"></tb-date-format-select>
              <tb-font-settings formControlName="tooltipDateFont"
                                [previewText]="tooltipDatePreviewFn">
              </tb-font-settings>
              <tb-color-input asBoxInput
                              colorClearButton
                              formControlName="tooltipDateColor">
              </tb-color-input>
            </div>
          </div>
          <div class="tb-form-row space-between">
            <div>{{ 'tooltip.background-color' | translate }}</div>
            <tb-color-input asBoxInput
                            colorClearButton
                            formControlName="tooltipBackgroundColor">
            </tb-color-input>
          </div>
          <div class="tb-form-row space-between">
            <div>{{ 'tooltip.background-blur' | translate }}</div>
            <mat-form-field appearance="outline" class="number" subscriptSizing="dynamic">
              <input matInput formControlName="tooltipBackgroundBlur" type="number" min="0" step="1" placeholder="{{ 'widget-config.set' | translate }}">
              <div matSuffix>px</div>
            </mat-form-field>
          </div>
        </ng-template>
      </mat-expansion-panel>
    </div>
    <div class="tb-form-row space-between">
      <div>{{ 'widgets.background.background' | translate }}</div>
      <tb-background-settings formControlName="background">
      </tb-background-settings>
    </div>
  </div>
</ng-container>
